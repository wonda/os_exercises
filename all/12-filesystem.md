# 文件系统

## 单选题

---

文件系统的主要目的是（）。
- [x] 实现对文件的按名存取
- [ ] 实现虚拟存贮器
- [ ] 提高外围设备的输入输出速度
- [ ] 用于存贮系统文档

> 在现在操作系统中，几乎都有一个文件管理系统，这个系统的目的主要实现对文件的按名存取。

按逻辑结构划分，文件主要有两类，UNIX中的文件系统采用（）。
- [ ] 网状文件
- [ ] 只读文件
- [ ] 读写文件
- [ ] 记录式文件
- [ ] 索引文件
- [x] 流式文件

> 按文件的逻辑结构可分为记录文件和流式文件，而UNIX、DOS、WINDOWS系统中的普通文件都是流式文件。

通常，文件的逻辑结构可以分为两大类：无结构的（）和有结构的记录式文件。
- [ ] 堆文件
- [x] 流式文件
- [ ] 索引文件
- [ ] 直接（Hash）文件

> 按文件的逻辑结构可分为记录文件和流式文件。

链接文件解决了顺序结构中存在的问题，它（）。
- [x] 提高了存储空间的利用率
- [ ] 适合于随机存取方式
- [ ] 不适用于顺序存取
- [ ] 指针存入主存，速度快

> 顺序结构 ：把逻辑文件的记录（内容）按其本身的顺序（逻辑记录的顺序）在磁盘上也按序存放在连续的块中。读取时也从第一个记录开始按顺序进行。在文件目录中指出文件名，存放的起始块号和占用块数。其最大优点是存取速度快。而问题主要是存储空间利用率不高、输出文件时难以估计需要多少磁盘块、影响文件扩展。链接结构：如果逻辑文件中的各个逻辑记录任意存放到一些磁盘块中，再用指针把各个块按逻辑记录的顺序链接起来，在文件目录中只记录第一块的地址和最后一块的地址，那么这种文件组织方式就是链接结构。链接结构解决了顺序结构中的所有问题，所有空闲块都可以被利用，在顺序读取时效率较高但需要随机存取时效率低下（因为要从第一个记录开始读取查。

文件管理实际上是对（2）的管理。
- [ ] 主存空间
- [x] 辅助存储空间
- [ ] 逻辑地址空间
- [ ] 物理地址空间

> 从系统角度看，文件系统是一个负责文件存储空间的管理机构，文件管理实际是对辅助存储空间的管理。

下面关于索引文件的论述中，第（）条是正确的论述。
- [ ] 索引文件中，索引表的每个表项中含有相应记录的关键字和存放该记录的物理地址。
- [x] 对顺序文件进行检索时，首先从FCB中读出文件的第一个盘块号；而对索引文件进行检索时，应先从FCB中读出文件索引表始址。
- [ ] 对于一个具有三级索引表的文件，存取一个记录通常要访问三次磁盘。
- [ ] 在文件较大时，无论是进行顺序存取还是随机存取，通常都是以索引文件方式为最快。

> 索引结构 ：索引结构是实现非连续存储的另一种方法，索引结构为每个文件建立一张“索引表”，把指示每个逻辑记录存放位置的指针集中在索引表中。（最直观的索引结构就比如我们的网站，首页就相当于一个索引表，每个链接记录了一个文件的位置，当我们点击时，就可以找到那个文件）。文件目录中指出文件名的索引表位置，而索引表中每个项指出一个逻辑记录的存放位置。存取文件时根据索引表中的登记项来查找磁盘上的逻辑记录。索引结构既适合顺序存取记录，也可以方便地随机存取记录，并且容易实现记录的增删和插入，所以索引结构被广泛应用。但是索引结构增加了索引表，要占用部分空间并增加读写索引表的时间。当索引项很多时，还要考虑采用多级索引结构。

下面关于顺序文件和链接文件的论述中错误的论述是（）。
- [x] 顺序文件适于建立在顺序存储设备上，而不适合建立在磁盘上。
- [ ] 在链接文件中是在每个盘块中设置一链接指针，用于将文件的所有盘块链接起来。
- [ ] 顺序文件必须采用连续分配方式，而链接文件和索引文件则都可采取离散分配方式。
- [ ] 在MS-DOS中采用的是链接文件结构。
- [ ] 链接文件解决了顺序结构中存在的问题，它提高了存储空间的利用率。

> 看关于顺序文件、链接文件和索引文件的介绍。

在文件系统中，（）要求逻辑记录顺序与磁盘块顺序一致。
- [x] 顺序文件
- [ ] 链接文件
- [ ] 索引文件
- [ ] 串联文件

> 看4关于顺序文件、链接文件和索引文件的介绍。

下列文件中，（）的物理结构不便于文件的扩充。
- [x] 顺序文件
- [ ] 链接文件
- [ ] 索引文件
- [ ] 多级索引文件

> 看关于顺序文件、链接文件和索引文件的介绍。

(）的物理结构对文件随机存取时必须按指针进行，效率较低。
- [ ] 连续文件
- [x] 链接文件
- [ ] 索引文件
- [ ] 多级索引文件

> 看关于顺序文件、链接文件和索引文件的介绍。

一个采用二级索引文件系统，存取一块盘块信息通常要访问（）次磁盘。
- [ ] 1
- [ ] 2
- [x] 3
- [ ] 4

> 二级索引取需要访问2次，存需要一次，共需要三次。

 设有一个包含1000个记录的索引文件，每个记录正好占用一个物理块。一个物理块可以存放10个索引表目。建立索引时，一个物理块应有一个索引表目，试问索引及其文件本身应占（）个物理块？
- [ ] 1000
- [ ] 1001
- [ ] 1011
- [x] 1111

> 共1000个记录，即有1000个索引表目，索引级数：lg1000=3；一个物理块可以放10个索引表目，三级索引需1000/10=100个物理块；二级索引：100/10=10；一级索引10/10=1。所以索引及文件共需1000+100+10+1=1111物理快。

打开文件操作的使用是（）。
- [ ] 把整个文件从磁盘拷贝到内存
- [x] 把文件目录项(FCB)从磁盘拷贝到内存
- [ ] 把整个文件和文件目录项(FCB)从磁盘拷贝到内存
- [ ] 把磁盘文件系统的控制管理信息从辅存读到内存

> 文件目录项是系统管理文件的必须信息结构，是文件存在的唯一标志，打开文件把文件目录项(FCB)从磁盘拷贝到内存。

如果文件系统中有两个文件重名，不应采用（1）。
- [x] 单级目录结构
- [ ] 树型目录结构
- [ ] 二级目录结构
- [ ] 单级和二级目录结构

> 一级目录结构，要求所有的文件名均不相同，一般只适用于微机的单用户系统。

文件系统采用二级文件目录可以（）。
- [ ] 缩短访问存储器的时间
- [ ] 实现文件共享
- [ ] 节省内存空间
- [x] 解决不同用户间的文件命名冲突

> 二级目录结构 则增加一级主文件目录，此目录是为用户建立的独立文件目录，用户访问文件时先要找到用户自己的目录再查找该目录下的指定文件。实际上，二级目录结构中，文件系统把用户名和文件名合起来作为文件标识。

【2010年计算机联考真题】设当前工作目录的主要目的是（）。
- [ ] 节省外存空间
- [ ] 节省内存空间
- [x] 加快文件的索引速度
- [ ] 加快文件的读/写速度

> 当文件系统含有多级目录时，每访问一个文件，都要使用从树根开始到树叶为止、包含中间节点名的全路径名。当前目录又称工作目录，进程对各个文件的访问都是相对于当前目录进行，而不需要一层一层的检索，加快了文件的检索速度。 选项12都是与相对目录无关；选项4加快文件的读/写速度取决于磁盘的性能。

【2009年计算机联考真题】文件系统中，文件访问控制信息存储的合理位置是（）。
- [x] 文件控制块
- [ ] 文件分配表
- [ ] 用户口令表
- [ ] 系统注册表

> 为了实现“按名存取”，文件系统为每个文件设置用于描述和控制文件的数据结构，称为文件控制块（FCB）。在文件控制块中，通常包含三类信息，即基本信息、存取控制信息级使用信息。

【2012年计算机联考真题】若一个用户进程通过read系统调用读取一个磁盘文件中的数据，则下列关于此进程的叙述中，正确的是（）。
I. 若文件的数据不在内存中，则该进程进入睡眠等待状态
II. 请求read系统调用会导致CPU从用户态切到核心态
III. read系统调用的参数应包含文件的名称
- [x] 仅I、II
- [ ] 仅I、III
- [ ] 仅II、III
- [ ] I、II和III

> 对于I，当所读文件的数据不在内存是，产生中断（缺页中断），原进程进入阻塞状态，知道所需数据从外存调入内存后，才将该进程唤醒。对于II，read系统调用通过陷入将CPU从用户态进入核心态，从而获取操作系统提供的服务。对于III，读一个文件首先要用open系统调用打开该文件。open参数包含文件的路径名与文件名，read只需要open返回的文件描述符，不用文件名作为参数。read要求三个输入参数：1文件描述符fd；2buf缓冲区首地址；3传送的字节数n。read的功能试图从fd所指示的文件中读入n个字节的数据，并将它们送到buf所指示的缓冲区中。

【2013年计算机联考真题】用户删除某文件的过程中，操作系统不可能执行的操作是（）。
- [x] 删除文件所在的目录
- [ ] 删除与此文件关联的目录项
- [ ] 删除与此文件对应的文件控制块
- [ ] 释放与此文件关联的内存缓冲区

> 此文件的目录下可能还存在其他的文件，因此删除文件不能删除文件所在的目录，而与此文件关联的目录项和文件控制块需要随着文件一同删除，同时释放文件关联的内存缓冲区。

【2009年计算机联考真题】 设文件F1的当前引用计数值为1，先建立文件F1的符号链接（软链接）文件F2，在建立文件F1的硬链接F3，然后删除文件F1.此时，文件F2和文件F3的引用技术支持分别是（）。
- [ ] 0,1
- [x] 1,1
- [ ] 1,2
- [ ] 2,1

> 建立符号链接时，引用计数直接复制；建立硬链接时，引用计数加1.删除文件时，删除操作对于符号链接是不可见的，这并不影响文件系统，当以后通过符号链接访问文件时，发现文件不存咋，直接删除符号链接；但对于硬链接则不可以直接删除，引用计数值减1，若值不为0，则不能删除文件，因为还有其他的硬链接指向此文件。当建立F2时，F1和F2的引用计数值都为1.当建立F3时，F1和F3的引用计数值都为2了。删除F1，F3的引用计数值为2-1=1，F2的引用计数值不变。

【河北大学】文件系统采用两级索引分配方式，如果每个磁盘块的大小为1KB，每个盘块号占4个字节，则在该系统中，文件的最大长度是（）。
- [x] 64MB
- [ ] 128MB
- [ ] 32MB
- [ ] 以上都不对

> 每个磁盘块大小1KB，每个盘块号占4个字节，则一个盘块可以存放1KB/4B=256个盘块，则2级索引文件的最大长度是256*256*1KB=64MB。

【2013年统考真题】为支持CD-ROM中视频文件的快速随机播放，播放性能最好的文件数据块组织方式是（）。
- [x] 连续结构
- [ ] 链式结构
- [ ] 直接索引结构
- [ ] 多级索引结构

> 视频文件属于有结构文件中的定长记录文件，适合用连续分配来组织，连续分配的优点主要有顺序访问容易，顺序访问速度快。为了实现快速随机播放，要保证最短时间查询，不宜选取链式和索引结构。

【2013年统考真题】若某文件系统索引节点（inode）中有直接地址项和间接地址项，则下列选项中，与单个文件长度无关的因素是（）。
- [x] 索引节点的总数
- [ ] 间接地址索引级数
- [ ] 地址项的个数
- [ ] 文件块大小

> 一个文件对应一个索引节点，索引节点的总数只能说明有多少个文件，跟单个文件的长度没有关系。而间接地址索引的级数、地址项的个数和文件块大小都跟单个文件长度相关。

【燕山大学，2006年】在磁盘上容易导致存储碎片的物理文件结构式（）。
- [ ] 链接
- [x] 连续
- [ ] 索引
- [ ] 索引和链接

> 连续文件的优点是在顺序存取时速度较快。存在如下缺点：1要求建立文件时就确定它的长度，2不便于文件的动态扩充。3可能出现外部碎片，就是在存储介质上存在很多空闲块，但不连续，无法被连续文件使用。

【南昌大学，2006年】采用直接存取法来读写磁盘上的物理记录时，效率最高的是（）。
- [x]  连续结构的文件
- [ ]  索引结构的文件
- [ ]  链接结构文件
- [ ] 其它结构文件

> 在直接存取法下，连续文件只要知道文件在存储设备上的起始地址和文件长度，就能很快的进行存取。适合随机存取的程度总结为：连续>索引>链接。

---

## 多选题

---

按用途分类，文件主要能分为（）
- [x] 系统文件
- [ ] 档案文件
- [x] 用户文件
- [x] 库文件

> 按用途 ：　 	 系统文件、库文件、用户文件
  按保护级别 ：　 可执行文件、只读文件、读写文件
  按信息流向： 　 输入文件、输出文件、输入输出文件
  按存放时限： 　 临时文件、永久文件、档案文件
  按设备类型：　  磁盘文件、磁带文件、卡片文件、打印文件
  按文件组织结构：逻辑文件、物理文件（顺序文件、链接文件、索引文件）

允许多个用户同时使用同一个共享文件时，下列（）做法是正确的。
- [x] 允许多个用户同时打开共享文件执行读操作
- [ ] 允许读者和写者同时使用共享文件
- [x] 不允许读者和写者同时使用共享文件
- [x] 不允许多个写者同时对共享文件执行写操作

> 进行文件读写要保持文件的正确性，所以不能进行同时读写，多个同时写等操作。

文件系统的功能有（）
- [x] 文件系统实现对文件的按名存取
- [x] 负责实现数据的逻辑结构到物理结构的转换
- [ ] 提高磁盘的读写速度
- [x] 提供对文件的存取方法和对文件的操作

> 文件系统的功能主要有：1、管理文件的存储介质 2、实现文件名到物理地址的映射 3、提供用户对文件和目录的操作命令  4、 提供用户共享文件机制  5、提供文件存取机制，保证文件安全性。

文件的物理结构可分为（）
- [x] 顺序结构
- [x] 链表结构
- [x] 索引结构
- [ ] 目录结构

> 文件的物理结构 ：由文件系统在存储介质上的文件构造方式称为文件的物理结构。不论用户看来是什么文件，在存储介质上存储时，按何种构造方式记录呢，因为介质上的存储单位是物理块，那么这些物理快是顺序存放，还是链式结构，或者索引结构，都要由文件系统结构来实现。

从对文件信息的存取次序考虑，存取方法可分为（）。
- [x] 顺序存取
- [x] 随机存取
- [ ] 索引存取
- [ ] 连续存取

> 文件的存取方式有顺序存取和随机存取两种。磁带上的文件只能顺序存取，磁盘上的文件既可采用顺序方式也可用随机方式存取。

---
